<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Snake â€” Fixed Working Version</title>
<style>
  body{
    margin:0;height:100vh;display:flex;flex-direction:column;
    align-items:center;justify-content:center;
    background:#191919;color:#fff;font-family:system-ui;
  }
  canvas{
    background:#3a3a3a;
    border-radius:12px;
  }
  .controls{margin-top:15px}
  button{
    background:#00ff99;color:#000;font-weight:600;
    border:none;border-radius:8px;padding:8px 16px;
    margin:0 5px;cursor:pointer;font-size:15px;
  }
  .score{margin-top:10px;font-weight:600}
</style>
</head>
<body>
<canvas id="board" width="500" height="500"></canvas>
<div class="controls">
  <button id="start">Start</button>
  <button id="pause">Pause</button>
  <button id="reset">Reset</button>
</div>
<div class="score">Score: <span id="score">0</span></div>

<script>
const cvs=document.getElementById("board"),ctx=cvs.getContext("2d");
const cols=25,rows=25,cell=cvs.width/cols;
let snake,dir,food,score=0,loopId=null,paused=false;

function resetGame(){
  snake=[{x:12,y:12}];
  dir={x:1,y:0};
  spawnFood();
  score=0;document.getElementById("score").textContent=score;
  draw();
}
function spawnFood(){
  food={x:Math.floor(Math.random()*cols),y:Math.floor(Math.random()*rows)};
}
function draw(){
  ctx.fillStyle="#3a3a3a";ctx.fillRect(0,0,cvs.width,cvs.height);
  // food
  ctx.fillStyle="#ff6b00";
  ctx.beginPath();ctx.arc(food.x*cell+cell/2,food.y*cell+cell/2,cell/3,0,Math.PI*2);ctx.fill();
  // snake
  ctx.fillStyle="#00eaff";
  snake.forEach(p=>ctx.fillRect(p.x*cell,p.y*cell,cell-1,cell-1));
}
function update(){
  if(paused)return;
  const head={x:snake[0].x+dir.x,y:snake[0].y+dir.y};
  // wrap
  if(head.x<0)head.x=cols-1;if(head.x>=cols)head.x=0;
  if(head.y<0)head.y=rows-1;if(head.y>=rows)head.y=0;
  // hit self
  if(snake.some((s,i)=>i>0&&s.x===head.x&&s.y===head.y)){resetGame();return;}
  snake.unshift(head);
  if(head.x===food.x&&head.y===food.y){score+=10;document.getElementById("score").textContent=score;spawnFood();}
  else snake.pop();
  draw();
}
function startLoop(){
  if(loopId)clearInterval(loopId);
  loopId=setInterval(update,120);
}

document.getElementById("start").onclick=()=>{
  paused=false;startLoop();
};
document.getElementById("pause").onclick=()=>{paused=!paused;};
document.getElementById("reset").onclick=()=>{resetGame();};
window.addEventListener("keydown",e=>{
  if(e.key==="ArrowUp"&&dir.y===0)dir={x:0,y:-1};
  if(e.key==="ArrowDown"&&dir.y===0)dir={x:0,y:1};
  if(e.key==="ArrowLeft"&&dir.x===0)dir={x:-1,y:0};
  if(e.key==="ArrowRight"&&dir.x===0)dir={x:1,y:0};
});

resetGame();
</script>
</body>
</html>
